(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Iab2:function(t,e,n){var o,r;void 0===(r="function"==typeof(o=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){a(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(t,a,i){var c=r.URL||r.webkitURL,s=document.createElement("a");s.download=a=a||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?o(s):n(s.href)?e(t,a,i):o(s,s.target="_blank")):(s.href=c.createObjectURL(t),setTimeout((function(){c.revokeObjectURL(s.href)}),4e4),setTimeout((function(){o(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,a){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),r);else if(n(t))e(t,r,a);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){o(i)}))}}:function(t,n,o,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var i="application/octet-stream"===t.type,c=/constructor/i.test(r.HTMLElement)||r.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&c)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},l.readAsDataURL(t)}else{var b=r.URL||r.webkitURL,d=b.createObjectURL(t);a?a.location=d:location.href=d,a=null,setTimeout((function(){b.revokeObjectURL(d)}),4e4)}});r.saveAs=a.saveAs=a,t.exports=a})?o.apply(e,[]):o)||(t.exports=r)},S381:function(t,e,n){"use strict";n.r(e),n.d(e,"TimesheetsModule",(function(){return P}));var o=n("ofXK"),r=n("tk/3"),a=n("3Pt+"),i=n("tyNb"),c=n("7pIB"),s=n("V5UK"),l=n("wd/R"),b=n.n(l),d=n("Iab2");function p(t,e){t=t||[],"string"==typeof(e=e||{})&&(e={type:e});try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)n.append(t[o]);return n.getBlob(e.type)}}function u(t){for(var e=t.length,n=new ArrayBuffer(e),o=new Uint8Array(n),r=-1;++r<e;)o[r]=t.charCodeAt(r);return n}var h=n("fXoL"),f=n("lJxs"),v=n("uRZ5");n("6sYA");let g=(()=>{class t{constructor(t,e){this.environment=t,this.http=e}getLogs(t,e){return this.http.get(`${this.environment.api}/admin/logs?from=${t}&to=${e}`).pipe(Object(f.a)(t=>t.data.map(t=>t)))}createLogs(t){return this.http.post(`${this.environment.api}/admin/logs`,t)}test(){return this.http.get("http://localhost:3000/protected")}}return t.\u0275fac=function(e){return new(e||t)(h.Xb(v.b),h.Xb(r.b))},t.\u0275prov=h.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const m=[[["","header",""]],[["","body",""]]],w=["[header]","[body]"];let y=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Hb({type:t,selectors:[["app-shared-content-layout"]],ngContentSelectors:w,decls:5,vars:0,consts:[[1,"layout"],[1,"layout__header"],[1,"layout__content"]],template:function(t,e){1&t&&(h.kc(m),h.Tb(0,"div",0),h.Tb(1,"div",1),h.jc(2),h.Sb(),h.Tb(3,"div",2),h.jc(4,1),h.Sb(),h.Sb())},styles:[".layout[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;background:#fff}.layout[_ngcontent-%COMP%]   .layout__header[_ngcontent-%COMP%]{display:flex;height:200px}.layout[_ngcontent-%COMP%]   .layout__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:scroll}"]}),t})();const S=function(t){return{visible:t}},T=["*"];let _=(()=>{class t{constructor(){this.showChange=new h.o,this.eventHandler=t=>{"Escape"===t.code&&this.closeOverlay()}}closeOverlay(){this.show=!1,this.showChange.emit(this.show)}ngOnInit(){window.addEventListener("keydown",this.eventHandler,!1)}ngOnDestroy(){window.removeEventListener("keydown",this.eventHandler,!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Hb({type:t,selectors:[["app-shared-overlay"]],inputs:{title:"title",show:"show"},outputs:{showChange:"showChange"},ngContentSelectors:T,decls:10,vars:5,consts:[[1,"slide",3,"ngClass"],[1,"slide__overlay",3,"hidden","click"],["ng-style","{'max-width' : width }",1,"slide__container-outer"],[1,"slide--title-wrapper"],[1,"slide__title"],[1,"slide__dismiss",3,"click"],[1,"slide__container-inner"]],template:function(t,e){1&t&&(h.kc(),h.Tb(0,"div",0),h.Tb(1,"div",1),h.ac("click",(function(){return e.closeOverlay()})),h.Sb(),h.Tb(2,"div",2),h.Tb(3,"div",3),h.Tb(4,"span",4),h.Ac(5),h.Sb(),h.Tb(6,"button",5),h.ac("click",(function(){return e.closeOverlay()})),h.Ac(7," \xd7 "),h.Sb(),h.Sb(),h.Tb(8,"div",6),h.jc(9),h.Sb(),h.Sb(),h.Sb()),2&t&&(h.lc("ngClass",h.nc(3,S,e.show)),h.Ab(1),h.lc("hidden",!e.show),h.Ab(4),h.Bc(e.title))},directives:[o.m],styles:[""]}),t})();var O=n("dNgK");class A{constructor(){}}let C=(()=>{class t{constructor(){}getDataRecordsArrayFromCSVFile(t){const e=[];for(let n=2;n<t.length;n++){const o=t[n].split(",");if(o.length){const t=new A;if(o[1]&&o[2]&&o[6]){const n=`${o[1].trim().replace('"',"")} ${o[2].trim()}`.replace('"',"");t.date=b()(n).format("YYYY-MM-DD"),t.hours=Number(o[6]),t.desc=o[7]?o[7].trim():"",t.project_plan=o[3]?o[3].trim():"",t.project_id=Number(o[4]),t.project_title=o[5]?o[5].trim():"",e.push(t)}}}return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),M=(()=>{class t{constructor(t,e,n){this.snack=t,this.helpers=e,this.fb=n,this.dom={step:0,records:[]},this.dom.step=1,this.form=this.fb.group({records:this.fb.array([])})}init(t){const e=this.form.controls.records;t.forEach(t=>{e.push(this.fb.group({date:new a.c(t.date,{updateOn:"blur",validators:[a.l.maxLength(30),a.l.required]}),desc:new a.c(t.desc,{updateOn:"blur",validators:[a.l.minLength(0),a.l.maxLength(9)]}),hours:new a.c(t.hours,{updateOn:"blur"}),id:new a.c(t.id,{updateOn:"blur"}),project_id:new a.c(t.project_id,{updateOn:"blur"}),project_plan:new a.c(t.project_plan,{updateOn:"blur"}),project_title:new a.c(t.project_title,{updateOn:"blur"}),billable:new a.c(!0)}))})}eventHandler(t){const e=t.target,n=new FileReader;n.readAsText(e.files[0]),n.onload=()=>{const t=n.result.split(/\r\n|\n/),e=this.helpers.getDataRecordsArrayFromCSVFile(t);this.init(e);const o=this.snack.open("Message archived","Undo",{duration:2e3});o.afterDismissed().subscribe(()=>{o.dismiss()})},n.onerror=()=>{console.log("error is occured while reading file!")}}continue(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(h.Nb(O.a),h.Nb(C),h.Nb(a.b))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-upload"]],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]{width:100%}.my-drop-zone[_ngcontent-%COMP%]{border:3px dotted #d3d3d3}.nv-file-over[_ngcontent-%COMP%]{border:3px dotted red}.another-file-over-class[_ngcontent-%COMP%]{border:3px dotted green}.fileContainer[_ngcontent-%COMP%]{overflow:hidden;position:relative}.fileContainer[_ngcontent-%COMP%]   [type=file][_ngcontent-%COMP%]{cursor:inherit;display:block;font-size:999px;filter:alpha(opacity=0);min-height:100%;min-width:100%;opacity:0;position:absolute;right:0;text-align:right;top:0}.upload__panel[_ngcontent-%COMP%]{height:100%;border:1px solid;display:flex;flex-direction:column}.upload__panel[_ngcontent-%COMP%]   .upload__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:scroll}.upload__panel[_ngcontent-%COMP%]   .upload__content[_ngcontent-%COMP%]   .upload__content__row[_ngcontent-%COMP%]{background:#fff}.upload__panel[_ngcontent-%COMP%]   .upload__panel__text[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:15px}.upload__panel[_ngcontent-%COMP%]   .upload__panel__nav[_ngcontent-%COMP%]{padding:20px;margin-top:auto}"]}),t})();const x=["csvReader"];function k(t,e){if(1&t&&(h.Tb(0,"option",27),h.Ac(1),h.Sb()),2&t){const t=e.$implicit;h.lc("ngValue",t.val),h.Ab(1),h.Bc(t.friendly)}}function L(t,e){if(1&t){const t=h.Ub();h.Tb(0,"tr"),h.Tb(1,"td"),h.dc(),h.Tb(2,"svg",17),h.Ob(3,"path",18),h.Ob(4,"path",19),h.Ob(5,"path",20),h.Sb(),h.Sb(),h.cc(),h.Tb(6,"td"),h.Ob(7,"span",28),h.fc(8,"date"),h.Sb(),h.Tb(9,"td"),h.Ob(10,"span",28),h.Sb(),h.Tb(11,"td"),h.Ob(12,"span",28),h.Sb(),h.Tb(13,"td"),h.Ob(14,"span",28),h.Sb(),h.Tb(15,"td"),h.Ob(16,"span",28),h.Sb(),h.Tb(17,"td"),h.Ob(18,"span",28),h.Sb(),h.Tb(19,"td"),h.Tb(20,"button",21),h.ac("click",(function(){return h.tc(t),h.ec().editLog()})),h.Ob(21,"i",22),h.Sb(),h.Sb(),h.Sb()}if(2&t){const t=e.$implicit;h.Ab(7),h.lc("textContent",h.gc(8,6,t.date)),h.Ab(3),h.lc("textContent",t.project_plan),h.Ab(2),h.lc("textContent",t.project_id),h.Ab(2),h.lc("textContent",t.project_title),h.Ab(2),h.lc("textContent",t.hours),h.Ab(2),h.lc("textContent",t.desc)}}const j=[{path:"",component:(()=>{class t{constructor(t,e){this.service=t,this.http=e,this.dom={uploaded:!1,records:[],range:"",ranges:[{friendly:"Jul 2019",val:"2019-07"},{friendly:"Aug 2019",val:"2019-08"},{friendly:"Sep 2019",val:"2019-09"},{friendly:"Oct 2019",val:"2019-10"},{friendly:"Nov 2019",val:"2019-11"},{friendly:"Dec 2019",val:"2019-12"},{friendly:"Jan 2020",val:"2020-01"},{friendly:"Feb 2020",val:"2020-02"}],panel:{show:!1}}}isValidCSVFile(t){return t.name.endsWith(".csv")}getHeaderArray(t){const e=t[0].split(","),n=[];for(let o=0;o<e.length;o++)n.push(e[o]);return n}fileReset(){this.csvReader.nativeElement.value="",this.dom.records=[]}saveLogs(t){alert("test"),this.service.createLogs(t).subscribe(()=>{alert("logs saved")})}updateLogs(t){if(t){const e=b()().format(`${t}-01`),n=b()().format(`${t}-`)+b()(`${t}-01`).daysInMonth();this.getLogs(e,n)}}getLogs(t,e){this.service.getLogs(t,e).subscribe(t=>{this.dom.records=t})}editLog(){alert("test")}download(){this.http.get("http://localhost:3000").subscribe(t=>{const e=new Blob([(n=t.data,o=[u(atob(n))],p(o))],{type:"application/pdf;charset=utf-8"});var n,o;Object(d.saveAs)(e,"hello_world.pdf")},t=>{console.log(t)})}ngOnInit(){this.service.test().subscribe(t=>{console.info(t)},t=>{console.info(t)})}}return t.\u0275fac=function(e){return new(e||t)(h.Nb(g),h.Nb(r.b))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-timesheets"]],viewQuery:function(t,e){var n;1&t&&h.Ec(x,!0),2&t&&h.qc(n=h.bc())&&(e.csvReader=n.first)},decls:106,vars:5,consts:[["header",""],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"col-md-3"],[1,"form-group"],["name","range",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["for","user_type",1,"control-label"],[1,"bar"],["name","company","type","text","required","required","ng-model","vm.dom.user.company"],["for","company",1,"control-label"],["body",""],[1,"list__fixed-table"],[1,"table"],[4,"ngFor","ngForOf"],[1,"item__type-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 32 32"],["d","M9.11.43a55.42 55.42 0 0113.78 0 10 10 0 018.68 8.68A54.94 54.94 0 0132 16a54.94 54.94 0 01-.43 6.89 10 10 0 01-8.68 8.68A54.94 54.94 0 0116 32a54.94 54.94 0 01-6.89-.43 10 10 0 01-8.68-8.68 55.42 55.42 0 010-13.78A10 10 0 019.11.43","fill","#f5f6fb","fill-rule","evenodd"],["fill","#424660","d","M21.25 10.75H19.5v-.87a.88.88 0 10-1.75 0v.87h-3.5v-.87a.88.88 0 10-1.75 0v.87h-1.75A1.76 1.76 0 009 12.5v8.75A1.76 1.76 0 0010.75 23h2.62a.88.88 0 100-1.75h-2.62V12.5h1.75v.88a.88.88 0 001.75 0v-.88h3.5v.88a.88.88 0 001.75 0v-.88h1.75v.88a.88.88 0 101.75 0v-.88a1.76 1.76 0 00-1.75-1.75z"],["fill","#424660","d","M22.73 16.66a.34.34 0 00-.07-.11.61.61 0 00-.07-.1l-.78-.73a.66.66 0 00-.71-.12.65.65 0 00-.39.6v.07h-4.23A1.53 1.53 0 0015 17.76v.86a.66.66 0 101.31 0v-.86a.22.22 0 01.22-.22h4.21v.24a.68.68 0 00.65.66.66.66 0 00.5-.23l.78-.89s.05-.09.08-.14v-.06a.45.45 0 000-.2.54.54 0 00-.02-.26zM22.12 19a.66.66 0 00-.65.66v.87a.22.22 0 01-.22.22H17v-.25a.65.65 0 00-1.15-.43l-.78.89a.83.83 0 00-.07.13v.06a.52.52 0 000 .21.78.78 0 000 .22.5.5 0 00.08.12.61.61 0 00.07.1l.78.73a.63.63 0 00.45.18.8.8 0 00.26-.05.66.66 0 00.39-.61v-.07h4.21a1.53 1.53 0 001.53-1.53v-.87a.66.66 0 00-.65-.58z"],[1,"button","button-sm",3,"click"],[1,"icon-pen"],[1,"axier-actions","axier-actions--fixed"],[1,"button","button-primary","button-shadow",3,"click"],[1,"button","button-shadow",3,"click"],[3,"show","title","showChange"],[3,"ngValue"],[3,"textContent"]],template:function(t,e){1&t&&(h.Tb(0,"app-shared-content-layout"),h.Tb(1,"div",0),h.Tb(2,"div",1),h.Tb(3,"div",2),h.Tb(4,"div",3),h.Tb(5,"h3"),h.Ac(6,"Timesheets"),h.Sb(),h.Sb(),h.Sb(),h.Tb(7,"div",2),h.Tb(8,"div",4),h.Tb(9,"div",5),h.Tb(10,"select",6),h.ac("ngModelChange",(function(t){return e.dom.range=t}))("ngModelChange",(function(t){return e.updateLogs(t)})),h.zc(11,k,2,2,"option",7),h.Sb(),h.Tb(12,"label",8),h.Ac(13,"Month"),h.Sb(),h.Ob(14,"i",9),h.Sb(),h.Sb(),h.Tb(15,"div",4),h.Tb(16,"div",5),h.Ob(17,"input",10),h.Tb(18,"label",11),h.Ac(19,"Company"),h.Sb(),h.Ob(20,"i",9),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(21,"div",12),h.Tb(22,"div",2),h.Tb(23,"div",13),h.Tb(24,"table",14),h.Tb(25,"thead"),h.Tb(26,"tr"),h.Ob(27,"th"),h.Tb(28,"th"),h.Ac(29,"Date"),h.Sb(),h.Tb(30,"th"),h.Ac(31,"Project Plan"),h.Sb(),h.Tb(32,"th"),h.Ac(33,"Project ID"),h.Sb(),h.Tb(34,"th"),h.Ac(35,"Project Title"),h.Sb(),h.Tb(36,"th"),h.Ac(37,"Hours"),h.Sb(),h.Tb(38,"th"),h.Ac(39,"Description"),h.Sb(),h.Ob(40,"th"),h.Sb(),h.Sb(),h.Tb(41,"tbody"),h.zc(42,L,22,8,"tr",15),h.Tb(43,"tr"),h.Tb(44,"td"),h.Tb(45,"div",16),h.dc(),h.Tb(46,"svg",17),h.Ob(47,"path",18),h.Ob(48,"path",19),h.Ob(49,"path",20),h.Sb(),h.Sb(),h.Sb(),h.cc(),h.Tb(50,"td"),h.Tb(51,"span"),h.Ac(52,"test"),h.Sb(),h.Sb(),h.Tb(53,"td"),h.Tb(54,"span"),h.Ac(55,"test"),h.Sb(),h.Sb(),h.Tb(56,"td"),h.Tb(57,"span"),h.Ac(58,"test"),h.Sb(),h.Sb(),h.Tb(59,"td"),h.Tb(60,"span"),h.Ac(61,"test"),h.Sb(),h.Sb(),h.Tb(62,"td"),h.Tb(63,"span"),h.Ac(64,"test"),h.Sb(),h.Sb(),h.Tb(65,"td"),h.Tb(66,"span"),h.Ac(67,"test"),h.Sb(),h.Sb(),h.Tb(68,"td"),h.Tb(69,"button",21),h.ac("click",(function(){return e.editLog()})),h.Ob(70,"i",22),h.Sb(),h.Sb(),h.Sb(),h.Tb(71,"tr"),h.Tb(72,"td"),h.Tb(73,"div",16),h.dc(),h.Tb(74,"svg",17),h.Ob(75,"path",18),h.Ob(76,"path",19),h.Ob(77,"path",20),h.Sb(),h.Sb(),h.Sb(),h.cc(),h.Tb(78,"td"),h.Tb(79,"span"),h.Ac(80,"test"),h.Sb(),h.Sb(),h.Tb(81,"td"),h.Tb(82,"span"),h.Ac(83,"test"),h.Sb(),h.Sb(),h.Tb(84,"td"),h.Tb(85,"span"),h.Ac(86,"test"),h.Sb(),h.Sb(),h.Tb(87,"td"),h.Tb(88,"span"),h.Ac(89,"test"),h.Sb(),h.Sb(),h.Tb(90,"td"),h.Tb(91,"span"),h.Ac(92,"test"),h.Sb(),h.Sb(),h.Tb(93,"td"),h.Tb(94,"span"),h.Ac(95,"test"),h.Sb(),h.Sb(),h.Tb(96,"td"),h.Tb(97,"button",21),h.ac("click",(function(){return e.editLog()})),h.Ob(98,"i",22),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(99,"div",23),h.Tb(100,"button",24),h.ac("click",(function(){return e.dom.panel.show=!0})),h.Ac(101," Add Logs "),h.Sb(),h.Tb(102,"button",25),h.ac("click",(function(){return e.download()})),h.Ac(103,"Download PDF"),h.Sb(),h.Sb(),h.Tb(104,"app-shared-overlay",26),h.ac("showChange",(function(t){return e.dom.panel.show=t})),h.Ob(105,"app-upload"),h.Sb()),2&t&&(h.Ab(10),h.lc("ngModel",e.dom.range),h.Ab(1),h.lc("ngForOf",e.dom.ranges),h.Ab(31),h.lc("ngForOf",e.dom.records),h.Ab(62),h.lc("show",e.dom.panel.show)("title","Upload CSV"))},directives:[y,a.k,a.g,a.h,o.n,_,M,a.i,a.m],pipes:[o.f],styles:[".item__type-icon[_ngcontent-%COMP%]{width:32px;height:32px;margin-right:16px}"]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},imports:[[s.a,a.d,o.c,r.c,i.h.forChild(j),c.b]]}),t})()}}]);